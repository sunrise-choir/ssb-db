<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `ssb_db` crate."><meta name="keywords" content="rust, rustlang, rust-lang, ssb_db"><title>ssb_db - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../ssb_db/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><p class='location'>Crate ssb_db</p><div class='block version'><p>Version 0.1.4</p></div><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all ssb_db's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#traits">Traits</a></li><li><a href="#types">Type Definitions</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'ssb_db', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><span class="help-button">?</span>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/ssb_db/lib.rs.html#1-265' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>ssb_db</a></span></h1><div class='docblock'><h1 id="ssb-db" class="section-header"><a href="#ssb-db">ssb-db</a></h1>
<p>The most basic db that you need to do (legacy) replication on ssb.</p>
<h2 id="legacy-replication" class="section-header"><a href="#legacy-replication">Legacy Replication</a></h2>
<p>&quot;Legacy Replication&quot; is how ssb used to do replication before
<a href="https://github.com/dominictarr/epidemic-broadcast-trees">ebt</a></p>
<p>It's simpler than ebt, but uses more bandwidth.</p>
<p>To do legacy replication a client calls
<a href="https://scuttlebot.io/apis/scuttlebot/ssb.html#createhistorystream-source">createHistoryStream</a>
for each feed it wants to replicate, passing the largest sequence number it knows about.</p>
<h2 id="ssbdb" class="section-header"><a href="#ssbdb">SsbDb</a></h2>
<p><code>ssb-db</code> defines a trait [SsbDb] that provides all the functionality you should need
to make and handle legacy replication requests.</p>
<h2 id="architecture" class="section-header"><a href="#architecture">Architecture</a></h2>
<p>[SqliteSsbDb] implements the [SsbDb] trait.</p>
<p>The underlying architecture is based on <a href="https://github.com/sunrise-choir/flumedb-rs">flume-db</a>.</p>
<p><code>ssb-db</code> stores data in an append only log. It maintains indexes for querying the log in sqlite.
The append only log is the source of truth and the indexes are derived from the log. If the
indexes break or need to be migrated, the sqlite db can be deleted and rebuilt from the log.</p>
<h2 id="validation" class="section-header"><a href="#validation">Validation</a></h2>
<p><code>ssb-db</code> <strong>does not validate any messages before appending them.</strong> The caller must validate them first.
See <a href="https://github.com/sunrise-choir/ssb-validate">ssb-validate</a> and <a href="https://github.com/sunrise-choir/ssb-verify-signatures">ssb-verify-signatures</a>.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use error::<a class="enum" href="../ssb_db/error/enum.Error.html" title="enum ssb_db::error::Error">Error</a>;</code></td></tr><tr><td><code>pub use sqlite_ssb_db::<a class="struct" href="../ssb_db/sqlite_ssb_db/struct.SqliteSsbDb.html" title="struct ssb_db::sqlite_ssb_db::SqliteSsbDb">SqliteSsbDb</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="error/index.html" title='ssb_db::error mod'>error</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="sqlite_ssb_db/index.html" title='ssb_db::sqlite_ssb_db mod'>sqlite_ssb_db</a></td><td class='docblock-short'></td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.SsbDb.html" title='ssb_db::SsbDb trait'>SsbDb</a></td><td class='docblock-short'></td></tr></table><h2 id='types' class='section-header'><a href="#types">Type Definitions</a></h2>
<table><tr class='module-item'><td><a class="type" href="type.FlumeSequence.html" title='ssb_db::FlumeSequence type'>FlumeSequence</a></td><td class='docblock-short'></td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "ssb_db";</script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>